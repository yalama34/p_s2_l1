# Лабораторная работа №1.Источники задач и контракты

## Цель
Реализация подсистемы приёма задач в платформе обработки задач с использованием принципов утиной типизации и контрактного программирования. Задачи поступают из различных источников, не связанных наследованием, но которые реализуют единый поведенческий контракт

## Структура проекта
```
├── src/
│   ├── __init__.py          # инициализация пакета
│   ├── contract.py          # протокол TaskSource (@runtime_checkable)
│   ├── task.py              # модель задачи (id, payload)
│   ├── task_loader.py       # загрузчик задач с runtime-проверкой
│   ├── task_sources.py      # источники задач (File, Generator, API)
│   └── main.py              # точка входа
├── tests/
│   ├── __init__.py
│   ├── conftest.py          # фикстуры для тестов
│   ├── test_api_source.py   # тесты API-заглушки
│   ├── test_file_source.py  # тесты файлового источника
│   ├── test_generator_source.py  # тесты генератора
│   └── test_loader.py       # тесты загрузчика
├── .coverage                # отчёт о покрытии
├── .gitignore
├── pyproject.toml           # конфигурация проекта
├── README.md
└── requirements.txt         # зависимости
```
## Запуск

```bash
python -m src.main
```

## Типы источников задач
1. FileSource. Загружает задачи из файла, удовлетворяющие шаблону. (пример в example.txt)
2. GeneratorSource. Генерирует указанное количестве задач
3. APISource. Имитирует интеграцию с внешним API для получения задач

## Тесты с покрытием
```bash
pytest --cov=src --cov-report=term-missing tests/
```
## Модель задачи
Задача в рамках лабораторной работы содержит:
- id - уникальный идентификатор задачи
- payload - произвольные данные задачи [dict]

## Контракт источника
Все источники реализуют единый протокол без наследования:
```python
@runtime_checkable
class TaskSource(Protocol):
    def get_tasks(self) -> List[Task]:
        """
        :return: list of tasks
        """
        ...
```

## Тестирование
```

Name                  Stmts   Miss  Cover   Missing
---------------------------------------------------
src\__init__.py           0      0   100%
src\contract.py           5      0   100%
src\main.py              13     13     0%   1-18
src\task.py               6      0   100%
src\task_loader.py       17      0   100%
src\task_sources.py      58      0   100%
---------------------------------------------------
TOTAL                    99     13    87%
```


## Вывод
Освоены принципы утиной типизации и контрактного программирования в языке Python. Реализована система приема задач с использованием `typing.Protocol` и с возможностью проверки при выполнении кода с помощью `@runtime_checkable` 

